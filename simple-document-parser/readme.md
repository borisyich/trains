# Simple-document-parser

This is a Streamlit-based web application designed to analyze documents and answer user queries using Retrieval-Augmented Generation (RAG) with the Gemma3n model from Ollama. The application supports multiple document formats (.txt, .pdf, .docx, .xlsx) and allows users to upload a document, extract its text, and ask questions based on its content. The answers are generated by combining document context with a language model, leveraging FAISS for efficient vector search and embeddings for text representation.

## Features
- **Document Support**: Processes .txt, .pdf, .docx, and .xlsx files.
- **Text Extraction**: Uses PyPDF2 for PDFs, python-docx for .docx, openpyxl for .xlsx, and Tesseract OCR as a fallback for PDFs with non-extractable text.
- **RAG Pipeline**: Splits documents into chunks, creates a FAISS vector store, and retrieves relevant chunks to answer queries using the Gemma3n model.
- **Interactive UI**: Built with Streamlit, allowing file uploads, question input, history tracking, and log display.
- **Logging**: Comprehensive logging to both file (`app.log`) and console for debugging and monitoring.
- **Session Management**: Maintains document text, vector store, and query history in Streamlit session state.
- **Environment Configuration**: Uses a `.env` file to configure Tesseract path, chunk size, overlap, and number of retrieved chunks.

## Requirements
- Python 3.8+
- Libraries:
    - 'streamlit'
    - 'ollama'
    - 'PyPDF2'
    - 'python-docx'
    - 'openpyxl'
    - 'pandas'
    - 'pdf2image'
    - 'pytesseract'
    - 'Pillow'
    - 'python-dotenv'
    - 'langchain'
    - 'langchain-community'
    - 'faiss-cpu'
    - 'sentence-transformers'

Additionally, you need:
- **Tesseract OCR**: Installed on your system with the path specified in the `.env` file.
- **Ollama**: Installed and running with the `gemma3n` model available.
- **.env file**: Containing the following variables:
  ```plaintext
  TESSERACT_PATH=/path/to/tesseract
  CHUNK_SIZE=1000
  CHUNK_OVERLAP=200
  N_CHUNKS=8
  ```

## Installation
1. Clone the repository 
  ```bash
   git clone https://github.com/borisyich/trains.git
   cd trains/simple-document-parser
   ```
2. Create a `.env` file in the project root with:
   ```env
  TESSERACT_PATH=/path/to/tesseract
  CHUNK_SIZE=1000 # for example
  CHUNK_OVERLAP=200 # for example
  N_CHUNKS=8 # for example
   ```
3. Ensure Ollama is running with the Gemma3n model:
   ```bash
   ollama run gemma3n
   ```
## Usage
1. Run the app:
   ```bash
   streamlit run app.py
   ```
2. Upload a document in .txt, .pdf, .docx, or .xlsx format.
3. Enter a question related to the document's content.
4. Click 'Submit question' to get an answer from the Gemma3n model.
